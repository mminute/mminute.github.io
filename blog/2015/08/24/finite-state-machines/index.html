
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title> - A PlanarFe Adventure</title>
  <meta name="author" content="Mason Jennings">

  
  <meta name="description" content="&ldquo;Finite State Machines&rdquo; is one of those terms that I&rsquo;ve heard mentioned but never found the time to look into. Now that I&rsquo;ve &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mminute.github.io/blog/2015/08/24/finite-state-machines/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="A PlanarFe Adventure" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">A PlanarFe Adventure</a></h1>
  
    <h2>LearnLoveCode</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="mminute.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title"></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-24T14:52:25-04:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:52 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p><img src="/images/THESTATEMTVLOGO.png" width="400"></p>

<h1><-MACHINE-></h1>

<p>&ldquo;Finite State Machines&rdquo; is one of those terms that I&rsquo;ve heard mentioned but never found the time to look into.  Now that I&rsquo;ve finished my three months at the Flatiron School I figured that I would give it a look.</p>

<!--more-->


<p>Finite state machines (FSM), aka Finite State Automata (ooooh, I like that better!) are machines that inhabit one of a finite number of states at a given time and answer the questions:</p>

<p>&#9;1. “What are all the distinct states of the system?”</p>

<p>&#9;2. “To what stimuli will the system respond in a given state?”</p>

<p>&#9;3. “What state will the system be in if it is presented with a given stimulus in a given state?”</p>

<p>&#9;4. “What sequence of inputs are needed so that the system will be in a particular state?”</p>

<p>A finite state machine is defined by it’s states and the triggering conditions for each transition where &lsquo;state&rsquo; describes the status of a system waiting to execute a transition and a &lsquo;transition&rsquo; is a set of actions to be executed when a condition is fulfilled or when an event is received. Some FSM also allow an action to be associated with a state.  An entry action is an action executed when transitioning <em>into</em> a state while an exit action executes when transitioning to a new state.</p>

<h2>So What Does All That Mean?</h2>

<p><img src="/images/traffic_light_FSM.png" width="400"></p>

<p>This is my (albeit new and limited) understanding of the purpose of a finite state automata:  <strong>it can control what inputs an object responds to at a given time and change the response to those same inputs based on the object state</strong> which is determined by actions that have been executed on that object in the past.</p>

<p>Let&rsquo;s look at the diagram above representing a stop light.  We&rsquo;ll start at the red light (S1).  In this example the traffic light can receive only input from the timer.  Any input from the timer to the light less than 20 fails to satify the condition required for the light to transition from red to green so the light will remain red.  A timer input == 20 causes the traffic light to transition.  The transition from red to green executes an action to reset (exit action of red state) and start the timer (entry action of green state).  The timer again send inputs to the traffic light.  This time the traffic light will not respond until the timer input == 15, at which point the light will transition from green to yellow and once again reset and start the timer.  The timer inputs now do not satisfy the conditions to transition until until the timer input == 5 which triggers a transition to our start point of the red light and yet again resets and starts the timer.</p>

<h3>So Here Is My Attempt At Another Simplified Example</h3>

<p><img src="/images/FSM_Transmission.png" width="800"></p>

<p>We have an imaginary car with an imaginary transmission.  It is a four speed transmission with a neutral gear (If you want to parallel park this imaginary car go ahead, hop out and push it.  Imagination doesn&rsquo;t weigh much.) which means the transmission can be in one of five possible states.</p>

<p>[:neutral, :first, :second, :third, :fourth] - <strong><em>“What are all the distinct states of the system?”</em></strong></p>

<p>The driver can give the transmission inputs to shift_up or shift_down and the transmission will behave just as you would expect.  1st gear can accept an input to shift up or shift down.  So can second and third.</p>

<p>The ends are where it gets a bit more interesting.  The tranmission will respond to an input to shift_up but it will not respond to an input to shift_down when it is in a :neutral state.  Similarly, when the transmisson is in a state of :fourth it will only respond to an input of shift_down; shift_up will have no effect.  This answers the question <strong><em>“To what stimuli will the system respond in a given state?”</em></strong></p>

<p>So, no entry or exit actions, only one input (binary +/-) but I think it qualifies as a simple state machine.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">class</span> <span class="nc">TransmissionStateMachine</span>
</span><span class='line'>    <span class="kp">attr_reader</span> <span class="ss">:state</span>
</span><span class='line'>
</span><span class='line'>    <span class="no">TransmissonStates</span> <span class="o">=</span> <span class="o">[</span><span class="ss">:neutral</span><span class="p">,</span> <span class="ss">:first</span><span class="p">,</span> <span class="ss">:second</span><span class="p">,</span> <span class="ss">:third</span><span class="p">,</span> <span class="ss">:fourth</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span>
</span><span class='line'>      <span class="vi">@state</span> <span class="o">=</span> <span class="ss">:neutral</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">shift_up</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">state</span> <span class="o">!=</span> <span class="ss">:fourth</span>
</span><span class='line'>        <span class="n">idx</span> <span class="o">=</span> <span class="no">TransmissonStates</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span class='line'>        <span class="vi">@state</span> <span class="o">=</span> <span class="no">TransmissonStates</span><span class="o">[</span><span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span>
</span><span class='line'>        <span class="nb">puts</span> <span class="s2">&quot;Shifted up to </span><span class="si">#{</span><span class="n">state</span><span class="si">}</span><span class="s2"> gear!&quot;</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="nb">puts</span> <span class="s2">&quot;You&#39;re in top gear dummy!&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">shift_down</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">state</span> <span class="o">!=</span> <span class="ss">:neutral</span>
</span><span class='line'>        <span class="n">idx</span> <span class="o">=</span> <span class="no">TransmissonStates</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span class='line'>        <span class="vi">@state</span> <span class="o">=</span> <span class="no">TransmissonStates</span><span class="o">[</span><span class="n">idx</span> <span class="o">-</span> <span class="mi">1</span><span class="o">]</span>
</span><span class='line'>        <span class="nb">puts</span> <span class="s2">&quot;Shifted down to </span><span class="si">#{</span><span class="n">state</span><span class="si">}</span><span class="s2"> gear!&quot;</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="nb">puts</span> <span class="s2">&quot;I can&#39;t go any lower down!  Is there a negative 1 gear?!?&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">t</span> <span class="o">=</span> <span class="no">TransmissionStateMachine</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Ready to go!&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_up</span> <span class="c1">#Shifted up to first gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_up</span> <span class="c1">#Shifted up to second gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_up</span> <span class="c1">#Shifted up to third gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_up</span> <span class="c1">#Shifted up to fourth gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_up</span> <span class="c1">#You&#39;re in top gear dummy!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_down</span> <span class="c1">#Shifted down to third gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_down</span> <span class="c1">#Shifted down to second gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_down</span> <span class="c1">#Shifted down to first gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_down</span> <span class="c1">#Shifted down to neutral gear!</span>
</span><span class='line'>  <span class="n">t</span><span class="o">.</span><span class="n">shift_down</span> <span class="c1">#I can&#39;t go any lower down!  Is there a negative 1 gear?!?</span>
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://www.quora.com/What-are-applications-of-finite-state-machines">
So where are finite state machines used?
</a></p>

<p>&#9;- A compiled regexp is a finite state machine.</p>

<p>&#9;- Network protocols which are state based like TCP.</p>

<p>&#9;- Lexical analyzer or token parser: It uses FSM to parse tokens into keywords or identifiers which are further used by the compiler.</p>

<p>&#9;- Vending machines.</p>

<p>&#9;- Video game AI.</p>

<p>&#9;- CPU controllers.</p>

<h2>Sources:</h2>

<p><a href="https://www.youtube.com/watch?v=hJIST1cEf6A">
Finite State Machines Explained- Video
</a>
<a href="http://people.cs.vt.edu/~kafura/ComputationalThinking/Class-Notes/FSM.pdf">
Finite State Machines- A Short Explanation
</a>
<a href="http://www.cs.princeton.edu/courses/archive/spr06/cos116/FSM_Tutorial.pdf">
How To Design A Finite State Machine
</a>
<a href="http://www.sitepoint.com/state-machines-in-ruby/">
State Machines in Ruby by Dave Kennedy
</a>
<a href="https://github.com/pluginaweek/state_machine">
State Machine Gem
</a>
<a href="http://web.cs.ucdavis.edu/~rogaway/classes/120/spring13/eric-applications.pdf">
Finite State Machine Applications
</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mason Jennings</span></span>

      




<time class='entry-date' datetime='2015-08-24T14:52:25-04:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:52 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://mminute.github.io/blog/2015/08/24/finite-state-machines/" data-via="" data-counturl="http://mminute.github.io/blog/2015/08/24/finite-state-machines/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/08/11/i-didnt-write-a-blog-post-for-today-so-here-are-some-pictures-of-animals/" title="Previous Post: I didn't write a blog post for today so here are some pictures of animals">&laquo; I didn't write a blog post for today so here are some pictures of animals</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/09/13/two-egg-problem/" title="Next Post: If You Want to Ace the Interview, You've Got to Break a Few Eggs: The Two Egg Problem">If You Want to Ace the Interview, You've Got to Break a Few Eggs: The Two Egg Problem &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/28/keyword-arguements/">Keyword Arguments</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/19/hash-map/">A New Hash#map</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/23/everyday-rails-testing-with-rspec/">Everyday Rails: Testing With RSpec</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/09/13/two-egg-problem/">If You Want to Ace the Interview, You've Got to Break a Few Eggs: The Two Egg Problem</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/24/finite-state-machines/"></a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Mason Jennings -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
